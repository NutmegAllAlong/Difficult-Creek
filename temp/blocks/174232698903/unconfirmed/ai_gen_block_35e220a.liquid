{% doc %}
  @prompt
    Create a rich text section with a centered heading and subtitle, followed by left-aligned body text that supports bullet points and rich text formatting. The heading alignment and body text alignment should be independent settings. Include proper HTML rendering for bullet lists when using the rich text editor.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-rich-text-container-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    padding: {{ block.settings.section_padding_top }}px 20px {{ block.settings.section_padding_bottom }}px;
    background-color: {{ block.settings.background_color }};
  }

  .ai-rich-text-inner-{{ ai_gen_id }} {
    max-width: {{ block.settings.content_max_width }}px;
    margin: 0 auto;
  }

  .ai-rich-text-header-{{ ai_gen_id }} {
    text-align: {{ block.settings.heading_alignment }};
    margin-bottom: {{ block.settings.header_spacing }}px;
  }

  .ai-rich-text-heading-{{ ai_gen_id }} {
    font-size: {{ block.settings.heading_size }}px;
    color: {{ block.settings.heading_color }};
    margin: 0 0 {{ block.settings.heading_subtitle_spacing }}px;
    line-height: 1.3;
  }

  .ai-rich-text-subtitle-{{ ai_gen_id }} {
    font-size: {{ block.settings.subtitle_size }}px;
    color: {{ block.settings.subtitle_color }};
    margin: 0;
    line-height: 1.5;
  }

  .ai-rich-text-body-{{ ai_gen_id }} {
    text-align: {{ block.settings.body_alignment }};
    color: {{ block.settings.body_color }};
    font-size: {{ block.settings.body_size }}px;
    line-height: 1.6;
  }

  .ai-rich-text-body-{{ ai_gen_id }} p {
    margin: 0 0 {{ block.settings.paragraph_spacing }}px;
  }

  .ai-rich-text-body-{{ ai_gen_id }} p:last-child {
    margin-bottom: 0;
  }

  .ai-rich-text-body-{{ ai_gen_id }} ul,
  .ai-rich-text-body-{{ ai_gen_id }} ol {
    margin: 0 0 {{ block.settings.paragraph_spacing }}px;
    padding-left: 20px;
  }

  .ai-rich-text-body-{{ ai_gen_id }} ul:last-child,
  .ai-rich-text-body-{{ ai_gen_id }} ol:last-child {
    margin-bottom: 0;
  }

  .ai-rich-text-body-{{ ai_gen_id }} li {
    margin-bottom: {{ block.settings.list_item_spacing }}px;
  }

  .ai-rich-text-body-{{ ai_gen_id }} li:last-child {
    margin-bottom: 0;
  }

  .ai-rich-text-body-{{ ai_gen_id }} ul {
    list-style-type: disc;
  }

  .ai-rich-text-body-{{ ai_gen_id }} ol {
    list-style-type: decimal;
  }

  .ai-rich-text-body-{{ ai_gen_id }} strong {
    font-weight: 600;
  }

  .ai-rich-text-body-{{ ai_gen_id }} em {
    font-style: italic;
  }

  .ai-rich-text-body-{{ ai_gen_id }} a {
    color: {{ block.settings.link_color }};
    text-decoration: underline;
  }

  .ai-rich-text-body-{{ ai_gen_id }} a:hover {
    color: {{ block.settings.link_hover_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-rich-text-container-{{ ai_gen_id }} {
      padding: {{ block.settings.section_padding_top | times: 0.6 }}px 15px {{ block.settings.section_padding_bottom | times: 0.6 }}px;
    }

    .ai-rich-text-heading-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size | times: 0.7 }}px;
    }

    .ai-rich-text-subtitle-{{ ai_gen_id }} {
      font-size: {{ block.settings.subtitle_size | times: 0.85 }}px;
    }

    .ai-rich-text-body-{{ ai_gen_id }} {
      font-size: {{ block.settings.body_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<div class="ai-rich-text-container-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-rich-text-inner-{{ ai_gen_id }}">
    {% if block.settings.heading != blank or block.settings.subtitle != blank %}
      <div class="ai-rich-text-header-{{ ai_gen_id }}">
        {% if block.settings.heading != blank %}
          <h2 class="ai-rich-text-heading-{{ ai_gen_id }}">
            {{ block.settings.heading }}
          </h2>
        {% endif %}
        {% if block.settings.subtitle != blank %}
          <p class="ai-rich-text-subtitle-{{ ai_gen_id }}">
            {{ block.settings.subtitle }}
          </p>
        {% endif %}
      </div>
    {% endif %}

    {% if block.settings.body_text != blank %}
      <div class="ai-rich-text-body-{{ ai_gen_id }}">
        {{ block.settings.body_text }}
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Rich text",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "Rich text heading"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 16,
      "max": 72,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 36
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#231f20"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Subtitle"
    },
    {
      "type": "inline_richtext",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Add a subtitle to complement your heading"
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "min": 12,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Subtitle size",
      "default": 18
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle color",
      "default": "#7f4a88"
    },
    {
      "type": "header",
      "content": "Body text"
    },
    {
      "type": "richtext",
      "id": "body_text",
      "label": "Body text",
      "default": "<p>Use this section to add rich text content with bullet points and formatting.</p><ul><li>First bullet point</li><li>Second bullet point</li><li>Third bullet point</li></ul><p>Add additional paragraphs as needed to tell your story.</p>"
    },
    {
      "type": "range",
      "id": "body_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Body size",
      "default": 16
    },
    {
      "type": "color",
      "id": "body_color",
      "label": "Body color",
      "default": "#343a40"
    },
    {
      "type": "select",
      "id": "body_alignment",
      "label": "Body alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Links"
    },
    {
      "type": "color",
      "id": "link_color",
      "label": "Link color",
      "default": "#7f4a88"
    },
    {
      "type": "color",
      "id": "link_hover_color",
      "label": "Link hover color",
      "default": "#a5e9e1"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "header_spacing",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Header bottom spacing",
      "default": 32
    },
    {
      "type": "range",
      "id": "heading_subtitle_spacing",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Heading to subtitle spacing",
      "default": 12
    },
    {
      "type": "range",
      "id": "paragraph_spacing",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Paragraph spacing",
      "default": 16
    },
    {
      "type": "range",
      "id": "list_item_spacing",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "List item spacing",
      "default": 8
    },
    {
      "type": "header",
      "content": "Section"
    },
    {
      "type": "range",
      "id": "content_max_width",
      "min": 400,
      "max": 1200,
      "step": 50,
      "unit": "px",
      "label": "Content max width",
      "default": 800
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 60
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#faf5f2"
    }
  ],
  "presets": [
    {
      "name": "Rich text"
    }
  ]
}
{% endschema %}
